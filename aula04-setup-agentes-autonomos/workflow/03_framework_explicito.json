{
  "name": "A04 - Etapa 3 - Framework Explícito",
  "nodes": [
    {
      "id": "1",
      "name": "Form Input",
      "type": "n8n-nodes-base.formTrigger",
      "parameters": {
        "fields": [
          "nome",
          "email",
          "descricao"
        ]
      }
    },
    {
      "id": "2",
      "name": "Gemini - Agente c/ ROG-IO",
      "type": "n8n-nodes-base.httpRequest",
      "parameters": {
        "url": "https://api.gemini.fake/validate",
        "method": "POST",
        "json": true,
        "body": {
          "system": "ROLE: Agente de Qualificação de Pedidos. OBJECTIVE: permitir apenas pedidos válidos no CRM. GUARDRAILS: não invente dados; não aceite e-mail inválido; não aprove campos vazios. I/O: Retorne SEMPRE JSON {status, motivo, dadosCorrigidos}.",
          "prompt": "Analise o input abaixo e produza a saída no formato definido em I/O.",
          "input": {
            "nome": "={{$json[\"nome\"]}}",
            "email": "={{$json[\"email\"]}}",
            "descricao": "={{$json[\"descricao\"]}}"
          }
        }
      }
    },
    {
      "id": "3",
      "name": "Decisão",
      "type": "n8n-nodes-base.switch",
      "parameters": {
        "rules": [
          {
            "operation": "equal",
            "value": "valido",
            "input": "={{$json[\"status\"]}}"
          }
        ]
      }
    },
    {
      "id": "4",
      "name": "Salvar no Banco (Corrigidos)",
      "type": "n8n-nodes-base.mySql",
      "parameters": {
        "query": "INSERT INTO pedidos (nome,email,descricao) VALUES (:nome,:email,:descricao)"
      }
    },
    {
      "id": "5",
      "name": "Revisão Humana",
      "type": "n8n-nodes-base.emailSend",
      "parameters": {
        "to": "revisao@empresa.com",
        "subject": "Pedido inválido",
        "text": "Favor revisar."
      }
    }
  ],
  "connections": {
    "1": {
      "main": [
        [
          "2"
        ]
      ]
    },
    "2": {
      "main": [
        [
          "3"
        ]
      ]
    },
    "3": {
      "main": [
        [
          "4"
        ],
        [
          "5"
        ]
      ]
    }
  }
}